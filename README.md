# Веб приложение с имитацией платежной системы для пополнения счетов пользователей

## Инструкция для тестирования
После запуска в браузере перейдите на страницу http://localhost:8000/docs
Изначально для авторизации в базе будут находиться два профиля:

Админ.
email: admin@test.ru
пароль: admin123

Обычный пользователь.
email: user@test.ru
пароль: user123

Для пользователя user@test.ru создан счет с account_id = 101.

При авторизации токен доступа действителен 5 минут, refresh токен действует 10 минут,
после чего необходимо снова войти по почте и паролю.

Для имитации платежа (/webhook/) необходимо в теле запроса указывать подпись.
Подпись можно получить запросом на /get-sign/ с необходимыми данными по платежу.

## Запуск
Для запуска приложения в корне проекта необходимо создать файл .env с вашими конфигурационными данными,
по образу .env_template

## Для запуска с docker compose.

1) Выполнить команду по сборке контейнеров
```commandline
docker compose build
```
2) Запустить контейнеры
```commandline
docker compose up
```

## Для запуска без docker compose.
Необходимо убедиться, что в PostgreSQL есть база данных, соответствующая конфигурациям в .env файле.

1) Создаём и активируем новое окружение
```commandline
python -m venv .venv
.\.venv\Scripts\activate
```
2) Устанавливаем зависимости
```commandline
pip install -r requirements.txt
```
3) Выполняем миграции
```commandline
alembic upgrade head
```
4) Запускаем сервер командой
```commandline
uvicorn src.app.main:app --reload --host 0.0.0.0 --port 8000
```


